################################################################################
# For help, see https://rics.readthedocs.io                                    #
#                                                                              #
# Translator top-level configuration:                                          #
# Same values are forwarded. See 'Forwarded configs' section.                  #
################################################################################
translator:
  fmt: "{id}:{name}[ (original: {original_name})] *{from}â€ {to}"
  default_translations:
    name_basics:
      name: Name unknown
      from: "?"
      to: "?"
    title_basics:
      name: Title unknown
      original_name: Original title unknown
      from: "?"
      to: "?"

################################################################################
# Fetcher configuration:
################################################################################
fetcher:
  # Full class reference required only for custom implementations.
  class: SqlFetcher

  # --------------------------
  # Base fetcher configuration
  # --------------------------
  allow_fetch_all: True

  # -------------------------------------------------
  # Keyword arguments for the specific implementation
  # -------------------------------------------------
  class-specific-kwargs:
    whitelist_tables: [ "name_basics", "title_basics" ]
    # Both password and connection_string can be read from an environment
    # variable by prefixing with '@', eg @TRANSLATION_DB_CONNECTION_STRING
    connection_string: "postgresql://postgres:{password}@localhost:5432/imdb"
    password: "your_password"

#_______________________________________________________________________________
#                              Forwarded configs                               #
#-------------------------------------------------------------------------------
# These are sent from the Translator to whoever needs them. All of them are    #
# optional. This sections can be entirely removed  in which case defaults will #
# be used instead. Not recommended as some tweaking is often needed.           #
#-------------------------------------------------------------------------------

# ------------------------------------------------------------------------------
# Placeholder override configuration. Optional.
#
# Do the column names in your database lack internal consistency? This is the
# section for you. Use this to bind strange placeholder names to "proper" names.
# ------------------------------------------------------------------------------
placeholder-overrides:
  source-specific:
    name_basics:
      nconst: id
      primaryName: name
      birthYear: from
      deathYear: to

    title_basics:
      tconst: id
      primaryTitle: name
      originalTitle: original_name
      startYear: from
      endYear: to

  shared:
  # Nothing for this example.

# ------------------------------------------------------------------------------
# Name-to-source mapping configuration. Optional.
#
# Overrides can be used to fix names that are "too hard" to be correctly mapped
# programmatically. Overrides take precedence over the parameterized logic.
# ------------------------------------------------------------------------------
name-to-source-mapping:
  unmapped_values_action: raise

  score-function:
    # Name is mandatory, everything else depends on the chosen function
    name: like_database_table
    apply_heuristics: True

  overrides:
    firstTitle: title_basics
    nconst: name_basics
    tconst: title_basics
